<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  　
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <title>Vite App</title>
</head>
<div>
  上传文件 ： <input type="file" name="file" id="fileId" />

  <button type="submit" name="btn" value="提交" id="btnId" onclick="check()" /> 提交
</div>

<script>

  function check() {

    var objFile = document.getElementById("fileId");
    console.log(objFile);
    console.log(objFile.files[0]);

    if (objFile.value == "") {
      alert("不能空")
    }
    // new FileReader()
    // FileReader.onerror
    // 处理error (en-US)事件。该事件在读取操作发生错误时触发。
 // 处理load (en-US)事件。该事件在读取操作完成时触发。
    /**
     * objFile.files[0]属性
     * lastModifiedDate：文件最后修改时间
     * name：文件名
     *       * GBK 汉字2字节
             * UTF8 汉字3字节
     * size：文件字节大小
     * type：文件类型

    */

    console.log(objFile.files[0].size); // 文件字节数

    var files = $('#fileId').prop('files');//获取到文件列表
    if (files.length == 0) {
      alert('请选择文件');
    } else {
      var reader = new FileReader();//新建一个FileReader
      //开始读取指定的文件中的内容。一旦完成，result属性中将包含一个字符串以表示所读取的文件内容。
      reader.readAsText(files[0], "UTF-8");//读取文件 
     
      reader.onload = function (evt) { //读取完文件之后会回来这里
        var fileString = evt.target.result; // 读取文件内容
        console.log(evt);
        console.log(fileString);

      }
    }

  }
</script>

</html>
